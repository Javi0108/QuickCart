<ion-spinner *ngIf="!shopData"></ion-spinner>


<!-- Barra lateral -->
<ion-menu contentId="main-content">
  <ion-header class="mb-2">
    <ion-toolbar color="tertiary">
      <ion-title>Section selector</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content>
    <img src="/assets/sections/section-banners.png" alt="banners" (click)="addSection('banners')">

    <hr style="margin: 10px; border-top: 1px solid #303030;">

    <img src="/assets/sections/section-hero.png" alt="banners" (click)="addSection('hero')">
  </ion-content>
</ion-menu>


<ion-popover trigger="popover-button" [dismissOnSelect]="true" style="padding-top: 10px; border-radius: 20px;">
  <ng-template>
    <ion-content>
      <ion-list>
        <ion-item class="quickart-item" [button]="true" [detail]="false" [routerLink]="['/seller-shops']">
          <ion-icon name="home-outline"></ion-icon>
          <span>My shops</span>
        </ion-item>
        <ion-item class="quickart-item" [button]="true" [detail]="false"
          [routerLink]="['/products-management', shopId]">
          <ion-icon name="bag-handle-outline"></ion-icon>
          <span>Store manager</span>
        </ion-item>
      </ion-list>
    </ion-content>
  </ng-template>
</ion-popover>



<ion-header id="main-content">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>

      <hr class="vertical-separator">

      <button class="quickart-button" id="popover-button">
        Website builder
      </button>
      <ion-icon name="chevron-down-outline" style="margin-left: -25px; margin-right: 5px; z-index: -1;"></ion-icon>

      <hr class="vertical-separator">
    </ion-buttons>

    <div slot="end" style="padding: 15px 15px 0px 15px;">
      <p *ngIf="shopData">{{ shopData.shop_data.name }}</p>
      <ion-spinner *ngIf="!shopData"></ion-spinner>
    </div>

    <ion-buttons slot="end">

      <hr class="vertical-separator">

      <button class="quickart-button" *ngIf="selectedMode === 'preview'" (click)="segmentChanged('edit')">
        Edit
      </button>
      <button class="quickart-button" *ngIf="selectedMode === 'edit'" (click)="segmentChanged('preview')">
        Preview
      </button>

      <hr class="vertical-separator">

      <button class="quickart-button quickart-button-violet" (click)="saveAllSections()">
        {{ areSectionsModified() ? 'Update' : 'Updated' }}
      </button>
      
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="shopData">

  <div class="pt-2" *ngIf="selectedMode === 'edit'">
    <div *ngIf="sections">
      <app-section-container [sections]="sections" [shopId]="shopId" (moveSectionUpEvent)="moveSectionUp($event)"
        (moveSectionDownEvent)="moveSectionDown($event)">></app-section-container>
    </div>
  </div>

  <div class="pt-2" *ngIf="selectedMode === 'preview'">
    <div *ngIf="sections">
      <app-web-page></app-web-page>
    </div>
  </div>
</ion-content>

<ion-toolbar *ngIf="selectedMode === 'edit'" color="light" style="position: sticky; top: 0">
  <ion-buttons slot="start">
    <button (click)="addSection('hero')" class="btn btn-primary ms-5 me-2">Add Hero</button>
    <button (click)="addSection('banners')" class="btn btn-primary">Add Banners</button>
    <button (click)="addSection('products')" class="btn btn-primary">Add Products</button>
  </ion-buttons>
</ion-toolbar>