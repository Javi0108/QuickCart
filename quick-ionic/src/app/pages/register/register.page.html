<body>
  <ion-spinner *ngIf="!pageloaded"></ion-spinner>

  <div *ngIf="pageloaded">
    <div class="background">
      <div class="shape"></div>
      <div class="shape"></div>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="register()">
      <h3>Sign up</h3>

      <!-- Select user type -->
      <ion-select labelPlacement="floating" fill="outline" class="always-flip" toggleIcon="caret-down-sharp"
        interface="popover" label="Account type" formControlName="user_type" placeholder="Select user type"
        (ionChange)="onUserTypeChange()">
        <ion-select-option value="Client">Client</ion-select-option>
        <ion-select-option value="Seller">Seller</ion-select-option>
      </ion-select>
      <!-- Email input -->
      <ion-input type="email" formControlName="email" placeholder="Email" labelPlacement="floating" label="Email"
        fill="outline"></ion-input>

      <!-- Username input - disabled until user_type is selected -->
      <ion-input type="text" formControlName="username" placeholder="Username" labelPlacement="floating"
        label="Username" fill="outline"></ion-input>

      <!-- Password input - disabled until user_type is selected -->
      <div class="d-flex flex-row align-items-center gap-2">
        <ion-input type="password" formControlName="password" placeholder="Password" labelPlacement="floating"
          label="Password" fill="outline" id="password">
          <ion-button id="hover-trigger" class="helpButton" fill="clear"
            slot="end"><i class="bi bi-question-circle"></i></ion-button>

          <ion-button id="buttonToggle1"
            (click)="showHide($event, 'password')" fill="clear" slot="end" aria-label="Show/hide">
            <ion-icon slot="icon-only" name="eye" aria-hidden="true"></ion-icon>
          </ion-button>
        </ion-input>


        <ion-popover trigger="hover-trigger" side="right" triggerAction="hover">
          <ng-template>
            <ion-content class="ion-padding">
              <ul id="requirementesList">
                <li id="step1">Use 6 characters o more</li>
                <li id="step2">
                  Combine upper and lower case
                </li>
                <li id="step3">Include numbers</li>
                <li id="step4">Include special characters</li>
                <li id="step5">There should be no blank spaces</li>
              </ul>
            </ion-content>
          </ng-template>
        </ion-popover>
      </div>

      <!-- Confirm Password input - disabled until user_type is selected -->
      <ion-input type="password" formControlName="confirmPassword" placeholder="Repeat the password"
        labelPlacement="floating" label="Repeat the password" fill="outline" id="confirmPassword">
        <ion-button id="buttonToggle2" (click)="showHide($event, 'confirmPassword')" fill="clear" slot="end"
          aria-label="Show/hide">
          <ion-icon slot="icon-only" name="eye" aria-hidden="true"></ion-icon>
        </ion-button>
      </ion-input>

      <!-- Submit button - disabled until form is valid -->
      <button class="submitButton" type="submit" [disabled]="!registerForm.valid">
        Sign up
      </button>
    </form>
  </div>
</body>